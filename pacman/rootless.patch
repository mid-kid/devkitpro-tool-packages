--- pacman-6.0.2.orig/lib/libalpm/add.c
+++ pacman-6.0.2/lib/libalpm/add.c
@@ -115,7 +115,7 @@
 {
 	int ret;
 	struct archive *archive_writer;
-	const int archive_flags = ARCHIVE_EXTRACT_OWNER |
+	const int archive_flags =
 	                          ARCHIVE_EXTRACT_PERM |
 	                          ARCHIVE_EXTRACT_TIME |
 	                          ARCHIVE_EXTRACT_UNLINK |
--- pacman-6.0.2.orig/lib/libalpm/util.c
+++ pacman-6.0.2/lib/libalpm/util.c
@@ -785,6 +785,7 @@
  */
 int _alpm_ldconfig(alpm_handle_t *handle)
 {
+	return 0;
 	char line[PATH_MAX];
 
 	_alpm_log(handle, ALPM_LOG_DEBUG, "running ldconfig\n");
--- pacman-6.0.2.orig/scripts/libmakepkg/executable/fakeroot.sh.in
+++ pacman-6.0.2/scripts/libmakepkg/executable/fakeroot.sh.in
@@ -28,10 +28,8 @@
 executable_functions+=('executable_fakeroot')
 
 executable_fakeroot() {
-	if (( SOURCEONLY || BUILDPKG )); then
-		if ! type -p fakeroot >/dev/null; then
-			error "$(gettext "Cannot find the %s binary.")" "fakeroot"
-			return 1
-		fi
-	fi
+	fakeroot() {
+		shift
+		FAKEROOTKEY=x "$@"
+	}
 }
--- pacman-6.0.2.orig/scripts/libmakepkg/executable/sudo.sh.in
+++ pacman-6.0.2/scripts/libmakepkg/executable/sudo.sh.in
@@ -28,9 +28,7 @@
 executable_functions+=('executable_sudo')
 
 executable_sudo() {
-    if (( DEP_BIN || RMDEPS || INSTALL )); then
-        if (( ${#PACMAN_AUTH[@]} == 0 )) && ! type -p sudo >/dev/null; then
-            warning "$(gettext "Cannot find the %s binary. Will use %s to acquire root privileges.")" "sudo" "su"
-        fi
-    fi
+	sudo() {
+		"$@"
+	}
 }
--- pacman-6.0.2.orig/scripts/makepkg.sh.in
+++ pacman-6.0.2/scripts/makepkg.sh.in
@@ -597,7 +597,7 @@
 	merge_arch_attrs
 
 	printf "# Generated by makepkg %s\n" "$makepkg_version"
-	printf "# using %s\n" "$(fakeroot -v)"
+	printf "# using fakeroot\n"
 
 	write_kv_pair "pkgname" "$pkgname"
 	write_kv_pair "pkgbase" "$pkgbase"
--- pacman-6.0.2.orig/src/pacman/util.c
+++ pacman-6.0.2/src/pacman/util.c
@@ -103,6 +103,7 @@
 
 int needs_root(void)
 {
+	return 0;
 	if(config->sysroot) {
 		return 1;
 	}
